---
import { AstroFont } from "astro-font";
import { theme } from "@/config/index.ts";
const { head } = Astro.locals.starlightRoute;

// font families
// font families
const pf = theme.fonts.font_family.primary;
const sf = theme.fonts.font_family.secondary;

const formatFont = (font: string) => {
  if (!font) return "";
  return font
    .replace(/\+/g, " ")
    .replace(/:[ital,]*[ital@]*[wght@]*[0-9,;.]+/gi, "");
};

const fontPrimary = formatFont(pf);
const fontSecondary = sf ? formatFont(sf) : "";

---

{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}

<!-- google font css -->
    <AstroFont
      config={[
        {
          src: [],
          preload: false,
          display: "swap",
          name: fontPrimary!,
          fallback: "sans-serif",
          cssVariable: "font-primary",
          googleFontsURL: `https://fonts.googleapis.com/css2?family=${pf}&display=swap`,
        },
        {
          src: [],
          preload: false,
          display: "swap",
          name: fontSecondary!,
          fallback: "sans-serif",
          cssVariable: "font-secondary",
          googleFontsURL: `https://fonts.googleapis.com/css2?family=${sf}&display=swap`,
        },
      ]}
    />

